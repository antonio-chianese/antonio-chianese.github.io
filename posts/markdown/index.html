<!DOCTYPE html>
<html lang="en" class="dark light">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="base" content="https:&#x2F;&#x2F;antonio-chianese.github.io">

    

    
    
    
    <title>
         Markdown Test
        
    </title>

        
            <meta property="og:title" content="Markdown Test" />
        
     

     
         
             <meta property="og:description" content="A blog about math, computer science, and a guy having fun." />
         
     

     
         
             <meta name="description" content="A blog about math, computer science, and a guy having fun." />
         
    
    
        <link rel="icon" type="image/png" href=&#x2F;icons&#x2F;favicon.ico />
        
        
            <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
            <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
            <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
            <link rel="manifest" href="/icons/site.webmanifest">
            <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#ff6f3c">
            <meta name="apple-mobile-web-app-title" content="6ixSS">
            <meta name="application-name" content="6ixSS">
            <meta name="msapplication-TileColor" content="#333333">
            <meta name="theme-color" content="#333333">
        
    

    
    
        <link href=https://antonio-chianese.github.io/fonts.css rel="stylesheet" />
    

    
    
        

        
            
            

            <script data-goatcounter="https://antonio-chianese.goatcounter.com/count" async src="https://antonio-chianese.github.io/js/count.js"></script>
            <noscript>
                
                <img src="https://antonio-chianese.goatcounter.com//count?p=&#x2F;posts&#x2F;markdown&#x2F;&t=Markdown Test">
            </noscript>
        
    

    
    
        <script src=https://antonio-chianese.github.io/js/codeblock.js></script>
    

    
    
        <script src=https://antonio-chianese.github.io/js/toc.js></script>
    

    
    
        <script src=https://antonio-chianese.github.io/js/note.js></script>
    

    
        
        <script>
            MathJax = {
              loader: { load: ['input/asciimath'] },
              output: {
                  displayOverflow: 'linebreak',
                      linebreaks: {
                          inline: true,
                          width: '100%',
                          lineleading: .2,
                          LinebreakVisitor: null,
                  }
              },
              tex: {
                inlineMath: [['$', '$']],
                processEscapes: true,
              },
              svg: {
                fontCache: 'global'
              }
            };
        </script>
        
        <script type="text/javascript" id="MathJax-script" async
            src="https://cdn.jsdelivr.net/npm/mathjax@4.0.0-beta.7/tex-mml-chtml.js">
        </script>
    

    
    
        <link rel="alternate" type="application/rss+xml" title="6ixSS" href="https://antonio-chianese.github.io/rss.xml">
    

    
    
        <link rel="stylesheet" type="text/css" href=https://antonio-chianese.github.io/theme/light.css />
        <link id="darkModeStyle" rel="stylesheet" type="text/css" href="https://antonio-chianese.github.io/theme/dark.css" />
    
    
    <!-- Set the correct theme in the script -->
    <script src=https://antonio-chianese.github.io/js/themetoggle.js></script>
    
        <script>setTheme(getSavedTheme());</script>
    

    
    <link rel="stylesheet" type="text/css" media="screen" href=https://antonio-chianese.github.io/main.css />

    

    
    
        <script src=https://antonio-chianese.github.io/js/mermaid.js></script>
    

    
        <script defer src="https://antonio-chianese.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e"></script></head>


<body>
    <div class="content">
        <header>
    <div class="main">
        
            <a href=https:&#x2F;&#x2F;antonio-chianese.github.io>6ixSS</a>
        


        <div class="socials">
            
            <a rel="me" href="https:&#x2F;&#x2F;github.com&#x2F;antonio-chianese&#x2F;" class="social">
                <img alt=github src=https://antonio-chianese.github.io/social_icons/github.svg>
            </a>
            
            <a rel="me" href="&#x2F;rss.xml" class="social">
                <img alt=rss src=https://antonio-chianese.github.io/social_icons/rss.svg>
            </a>
            
        </div>
    </div>

    <nav>
        
            <a href=https://antonio-chianese.github.io/posts class="nav-item">&#x2F;posts</a>
        
            <a href=https://antonio-chianese.github.io/projects class="nav-item">&#x2F;projects</a>
        
            <a href=https://antonio-chianese.github.io/about class="nav-item">&#x2F;about</a>
        
            <a href=https://antonio-chianese.github.io/etc class="nav-item">&#x2F;etc</a>
        

        
            <button 
                id="search-button"
                class="search-button"
                title="$SHORTCUT to open search"
            >
                <img 
                    src="https://antonio-chianese.github.io/search.svg" 
                    alt="Search" 
                    class="search-icon"
                >
            </button>

            <div id="searchModal" class="search-modal js" role="dialog" aria-labelledby="modalTitle">
                <div id="modal-content">
                    <h1 id="modalTitle" class="page-header">Search</h1>
                    <div id="searchBar">
                        <input 
                            id="searchInput" 
                            role="combobox" 
                            autocomplete="off" 
                            spellcheck="false" 
                            aria-expanded="false" 
                            aria-controls="results-container" 
                            placeholder="Search..."
                        />
                        <button 
                            id="clear-search" 
                            class="clear-button"
                            title="Clear search"
                        >
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                                <path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/>
                            </svg>
                        </button>
                    </div>
                    <div id="results-container">
                        <div id="results-info">
                            <span id="zero_results" style="display: none;">No results</span>
                            <span id="one_result" style="display: none;">1 result</span>
                            <span id="many_results" style="display: none;">$NUMBER results</span>
                        </div>
                        <div id="results" role="listbox"></div>
                    </div>
                </div>
            </div>
        

        
            <a id="dark-mode-toggle" onclick="toggleTheme(); event.preventDefault();" href="#">
                <img src=https://antonio-chianese.github.io/feather/sun.svg id="sun-icon" style="filter: invert(1);" alt="Light" />
                <img src=https://antonio-chianese.github.io/feather/moon.svg id="moon-icon" alt="Dark" />
            </a>

            <!-- Inititialize the theme toggle icons -->
            <script>updateItemToggleTheme()</script>
        
    </nav>
</header>


        
        
    
<main>
    <article>
        <div class="title">
            
            
    <div class="page-header">
        Markdown Test<span class="primary-color" style="font-size: 1.6em">.</span>
    </div>


                <div class="meta">
                    
                        Posted on <time>2022-01-01</time>
                    

                    
                        :: Updated on <time>2024-06-14</time>
                    

                    
                        :: <time>3</time> Min Read
                    

                    
                    
                            <span class="tags-label"> :: Tags:</span>
                            <span class="tags">
                                    <a href="https://antonio-chianese.github.io/tags/educational/" class="post-tag">educational</a>, 
                                
                                    <a href="https://antonio-chianese.github.io/tags/tutorial/" class="post-tag">tutorial</a>
                                
                            </span>
                    

                    
                    

                        
                        
                            
                        

                        
                            
                            :: <a href="https:&#x2F;&#x2F;github.com&#x2F;antonio-chianese&#x2F;antonio-chianese.github.io&#x2F;blob&#x2F;main&#x2F;content&#x2F;posts&#x2F;markdown.md" target="_blank" rel="noopener noreferrer"> Source Code</a>
                        
                    

                    

                </div>
        </div>

        

        
        
        
            <div class="toc-container">
                <h1 class="toc-title">Table of Contents</h1>
                <ul class="toc-list">
                    
                        <li>
                            <a href="https://antonio-chianese.github.io/posts/markdown/#h1">H1</a>
                            
                                <ul>
                                    
                                        <li>
                                            <a href="https://antonio-chianese.github.io/posts/markdown/#h2">H2</a>
                                        </li>

                                        
                                            <ul>
                                                
                                                    <li>
                                                        <a href="https://antonio-chianese.github.io/posts/markdown/#h3">H3</a>
                                                    </li>
                                                
                                            </ul>
                                        
                                    
                                        <li>
                                            <a href="https://antonio-chianese.github.io/posts/markdown/#code-block">Code Block</a>
                                        </li>

                                        
                                    
                                        <li>
                                            <a href="https://antonio-chianese.github.io/posts/markdown/#ordered-list">Ordered List</a>
                                        </li>

                                        
                                    
                                        <li>
                                            <a href="https://antonio-chianese.github.io/posts/markdown/#unordered-list">Unordered List</a>
                                        </li>

                                        
                                    
                                        <li>
                                            <a href="https://antonio-chianese.github.io/posts/markdown/#nested-list">Nested list</a>
                                        </li>

                                        
                                    
                                        <li>
                                            <a href="https://antonio-chianese.github.io/posts/markdown/#quote">Quote</a>
                                        </li>

                                        
                                    
                                        <li>
                                            <a href="https://antonio-chianese.github.io/posts/markdown/#table-inline-markdown">Table Inline Markdown</a>
                                        </li>

                                        
                                    
                                        <li>
                                            <a href="https://antonio-chianese.github.io/posts/markdown/#foldable-text">Foldable Text</a>
                                        </li>

                                        
                                    
                                        <li>
                                            <a href="https://antonio-chianese.github.io/posts/markdown/#code-tags">Code tags</a>
                                        </li>

                                        
                                    
                                        <li>
                                            <a href="https://antonio-chianese.github.io/posts/markdown/#note">Note</a>
                                        </li>

                                        
                                    
                                </ul>
                            
                        </li>
                    
                </ul>
            </div>
        
        

        <section class="body">
            <h1 id="h1"><a class="zola-anchor" href="#h1" aria-label="Anchor link for: h1">H1</a></h1>
<h2 id="h2"><a class="zola-anchor" href="#h2" aria-label="Anchor link for: h2">H2</a></h2>
<h3 id="h3"><a class="zola-anchor" href="#h3" aria-label="Anchor link for: h3">H3</a></h3>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Aliquet sagittis id consectetur purus ut. In pellentesque massa placerat duis ultricies. Neque laoreet suspendisse interdum consectetur libero id. Justo nec ultrices dui sapien eget mi proin. Nunc consequat interdum varius sit amet mattis vulputate. Sollicitudin tempor id eu nisl nunc mi ipsum. Non odio euismod lacinia at quis. Sit amet nisl suscipit adipiscing. Amet mattis vulputate enim nulla aliquet porttitor lacus luctus accumsan. Sit amet consectetur adipiscing elit pellentesque habitant. Ac placerat vestibulum lectus mauris. Molestie ac feugiat sed lectus vestibulum mattis ullamcorper velit sed. <a rel="noreferrer" href="https://www.google.com">Google</a></p>
<p><img src="https://markdown-here.com/img/icon256.png" alt="Markdown Logo" /></p>
<h2 id="code-block"><a class="zola-anchor" href="#code-block" aria-label="Anchor link for: code-block">Code Block</a></h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Hello WorldHello WorldHello WorldHello WorldHello WorldHello WorldHello WorldHello WorldHello WorldHello WorldHello World&quot;</span><span>)
</span><span>}
</span></code></pre>
<pre data-lang="random" style="background-color:#0f1419;color:#bfbab0;" class="language-random "><code class="language-random" data-lang="random"><span>Random text
</span></code></pre>
<pre data-linenos data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><table><tbody><tr><td>1</td><td><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span></td></tr><tr><td><mark style="background-color:#0a0e12;">2</mark></td><td><mark style="background-color:#0a0e12;"><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Hello World&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span></mark></td></tr><tr><td>3</td><td><span>}
</span></td></tr></tbody></table></code></pre>
<h2 id="ordered-list"><a class="zola-anchor" href="#ordered-list" aria-label="Anchor link for: ordered-list">Ordered List</a></h2>
<ol>
<li>First item</li>
<li>Second item</li>
<li>Third item</li>
</ol>
<h2 id="unordered-list"><a class="zola-anchor" href="#unordered-list" aria-label="Anchor link for: unordered-list">Unordered List</a></h2>
<ul>
<li>List item</li>
<li>Another item</li>
<li>And another item</li>
</ul>
<h2 id="nested-list"><a class="zola-anchor" href="#nested-list" aria-label="Anchor link for: nested-list">Nested list</a></h2>
<ul>
<li>Fruit
<ul>
<li>Apple</li>
<li>Orange</li>
<li>Banana</li>
</ul>
</li>
<li>Dairy
<ul>
<li>Milk</li>
<li>Cheese</li>
</ul>
</li>
</ul>
<h2 id="quote"><a class="zola-anchor" href="#quote" aria-label="Anchor link for: quote">Quote</a></h2>
<blockquote>
<p>Two things are infinite: the universe and human stupidity; and I’m not sure about the
universe.<br>
— <cite>Albert Einstein</cite></p>
</blockquote>
<h2 id="table-inline-markdown"><a class="zola-anchor" href="#table-inline-markdown" aria-label="Anchor link for: table-inline-markdown">Table Inline Markdown</a></h2>
<table><thead><tr><th>Italics</th><th>Bold</th><th>Code</th><th>StrikeThrough</th></tr></thead><tbody>
<tr><td><em>italics</em></td><td><strong>bold</strong></td><td><code>code</code></td><td><del>strikethrough</del></td></tr>
</tbody></table>
<h2 id="foldable-text"><a class="zola-anchor" href="#foldable-text" aria-label="Anchor link for: foldable-text">Foldable Text</a></h2>
<details>
    <summary>Title 1</summary>
    <p>IT'S A SECRET TO EVERYBODY.</p>
</details>
<details>
    <summary>Title 2</summary>
    <p>Stay awhile, and listen!</p>
</details>
<h2 id="code-tags"><a class="zola-anchor" href="#code-tags" aria-label="Anchor link for: code-tags">Code tags</a></h2>
<p>Lorem ipsum <code>dolor</code> sit amet, <code>consectetur adipiscing</code> elit.
<code>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</code></p>
<h2 id="note"><a class="zola-anchor" href="#note" aria-label="Anchor link for: note">Note</a></h2>
<p>Here is an example of the <code>note</code> shortcode:</p>
<p>This one is static!
<div class="note-container">
  
    <div class="note-header">
      
        <div class="note-icon">
        <p>Note!</p>

        </div>
      
    </div>
    <div class="note-content">
      <p>This blog assumes basic terminal maturity</p>

    </div>
  
</div>
</p>
<p>This one is clickable!
<div class="note-container">
  
    <button class="note-toggle">
      
        <div class="note-icon">
        <p>Quiz!</p>

        </div>
      
    </button>

    
    <div class="note-content" style="display: none;">
    
    <p>The answer to the quiz!</p>

    </div>
  
</div>
</p>
<p>Syntax:</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>{{ note(header=&quot;Note!&quot;, body=&quot;This blog assumes basic terminal maturity&quot;) }}
</span><span>{{ note(clickable=true, hidden = true, header=&quot;Quiz!&quot;, body=&quot;The answer to the quiz!&quot;) }}
</span></code></pre>
<p>You can also use some HTML in the text:
<div class="note-container">
  
    <div class="note-header">
      
        <div class="note-icon">
        <p>Note!</p>

        </div>
      
    </div>
    <div class="note-content">
      <h1>This blog assumes basic terminal maturity</h1>
    </div>
  
</div>
</p>
<p>Literal shortcode:</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>{{ note(header=&quot;Note!&quot;, body=&quot;&lt;h1&gt;This blog assumes basic terminal maturity&lt;/h1&gt;&quot;) }}
</span></code></pre>
<p>Pretty cool, right?</p>
<p>Finally, you can do something like this (hopefully):</p>
<div class="note-container">
  
    <button class="note-toggle">
      
        <div class="note-icon">
        <p>Quiz!</p>

        </div>
      
    </button>

    
    <div class="note-content" style="display: block;">
    
    <h1 id="hello-this-is-markdown-inside-a-note-shortcode">Hello this is markdown inside a note shortcode</h1>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Hello World&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>We can’t call another shortcode inside a shortcode, but this is good enough.</p>

    </div>
  
</div>
<p>Here is the raw markdown:</p>
<pre data-lang="markdown" style="background-color:#0f1419;color:#bfbab0;" class="language-markdown "><code class="language-markdown" data-lang="markdown"><span>{{ note(clickable=true, header=&quot;Quiz!&quot;) }}
</span><span>
</span><span style="font-weight:bold;color:#ff7733;"># </span><span style="font-weight:bold;color:#59c2ff;">Hello this is markdown inside a note shortcode
</span><span>
</span><span>```</span><span style="color:#f29718;">rust
</span><span style="background-color:#bfbab007;color:#ff7733;">fn </span><span style="background-color:#bfbab007;color:#ffb454;">main</span><span style="background-color:#bfbab007;color:#bfbab0;">() {
</span><span style="background-color:#bfbab007;color:#bfbab0;">    </span><span style="background-color:#bfbab007;color:#f07178;">println!</span><span style="background-color:#bfbab007;color:#bfbab0;">(</span><span style="background-color:#bfbab007;color:#c2d94c;">&quot;Hello World&quot;</span><span style="background-color:#bfbab007;color:#bfbab0;">)</span><span style="background-color:#bfbab007;color:#bfbab0cc;">;
</span><span style="background-color:#bfbab007;color:#bfbab0;">}
</span><span>```
</span><span>
</span><span>We can&#39;t call another shortcode inside a shortcode, but this is good enough.
</span><span>
</span><span>{{/* end </span><span style="font-style:italic;color:#f07178;">*/}}
</span></code></pre>
<p>Finally, we have center
<div class="note-container">
  
    <div class="note-header">
      
        <div class="note-center">
        <p>Centered Text</p>

        </div>
      
    </div>
    <div class="note-content">
      <p>This is centered text</p>

    </div>
  
</div>
</p>
<pre data-lang="markdown" style="background-color:#0f1419;color:#bfbab0;" class="language-markdown "><code class="language-markdown" data-lang="markdown"><span>{{ note(center=true, header=&quot;Centered Text&quot;, body=&quot;This is centered text&quot;) }}
</span></code></pre>
<p>It works good enough for me!</p>
<p>Testing<sup class="footnote-reference" id="fr-1-1"><a href="#fn-1">[1]</a></sup></p>
<p>Other stuff I stole lol:</p>
<pre class="mermaid">
  graph LR
    A[Start] --> B[Initialize]
    B --> C[Processing]
    C --> D[Complete]
    D --> E[Success]
    
    style A fill:#f9f,stroke:#333
    style E fill:#9f9,stroke:#333
</pre>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">use super</span><span style="color:#f29668;">::</span><span>Simulation</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">use </span><span>itertools</span><span style="color:#f29668;">::</span><span>Itertools</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>collections</span><span style="color:#f29668;">::</span><span>HashMap</span><span style="color:#bfbab0cc;">;
</span><span>
</span><span style="color:#bfbab0cc;">#</span><span>[</span><span style="color:#ffb454;">derive</span><span>(Debug)]
</span><span style="color:#ff7733;">pub struct </span><span style="color:#59c2ff;">Flajolet </span><span>{}
</span><span>
</span><span style="color:#ff7733;">impl </span><span>Simulation </span><span style="color:#ff7733;">for </span><span style="color:#59c2ff;">Flajolet </span><span>{
</span><span>    </span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">run</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#f29718;">self</span><span>) </span><span style="color:#bfbab0cc;">-&gt; </span><span style="font-style:italic;color:#39bae6;">Vec</span><span>&lt;</span><span style="color:#ff7733;">f64</span><span>&gt; {
</span><span>        </span><span style="color:#ff7733;">let</span><span> probabilities </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">self
</span><span>            </span><span style="color:#f29668;">.</span><span style="color:#f07178;">get_probabilities</span><span>()
</span><span>            </span><span style="color:#f29668;">.</span><span style="color:#f07178;">expect</span><span>(</span><span style="color:#c2d94c;">&quot;failed to get probabilities&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="color:#ff7733;">let</span><span> days </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span style="color:#f07178;">days</span><span>() </span><span style="color:#f29668;">+ </span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">; </span><span style="font-style:italic;color:#5c6773;">// 366 days
</span><span>        </span><span style="color:#f07178;">vec!</span><span>[</span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span style="color:#f07178;">flajolet</span><span>(days</span><span style="color:#bfbab0cc;">,</span><span> probabilities)]
</span><span>    }
</span><span>}
</span><span>
</span><span style="color:#bfbab0cc;">#</span><span>[</span><span style="color:#ffb454;">test</span><span>]
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">logic</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> model </span><span style="color:#f29668;">=</span><span> Flajolet {}</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> m </span><span style="color:#f29668;">= </span><span style="color:#f29718;">3</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> probabilities </span><span style="color:#f29668;">= </span><span style="color:#f07178;">vec!</span><span>[(</span><span style="color:#f29718;">0</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">0.1</span><span>)</span><span style="color:#bfbab0cc;">, </span><span>(</span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">0.2</span><span>)</span><span style="color:#bfbab0cc;">, </span><span>(</span><span style="color:#f29718;">2</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">0.3</span><span>)]</span><span style="color:#bfbab0cc;">;
</span><span>
</span><span>    </span><span style="color:#ff7733;">let</span><span> probabilities </span><span style="color:#f29668;">=</span><span> probabilities</span><span style="color:#f29668;">.</span><span style="color:#f07178;">into_iter</span><span>()</span><span style="color:#f29668;">.</span><span>collect</span><span style="color:#f29668;">::</span><span>&lt;HashMap&lt;</span><span style="color:#f29668;">_</span><span>, </span><span style="color:#f29668;">_</span><span>&gt;&gt;()</span><span style="color:#bfbab0cc;">;
</span><span>
</span><span>    </span><span style="color:#ff7733;">let</span><span> expected </span><span style="color:#f29668;">=</span><span> model</span><span style="color:#f29668;">.</span><span style="color:#f07178;">flajolet</span><span>(m</span><span style="color:#bfbab0cc;">,</span><span> probabilities)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> expected)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span><span>
</span><span style="color:#ff7733;">impl </span><span style="color:#59c2ff;">Flajolet </span><span>{
</span><span>    </span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">flajolet</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#f29718;">self</span><span>, </span><span style="color:#f29718;">days</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">u16</span><span>, </span><span style="color:#f29718;">probabilities</span><span style="color:#bfbab0cc;">: </span><span>HashMap&lt;</span><span style="color:#ff7733;">u32</span><span>, </span><span style="color:#ff7733;">f64</span><span>&gt;) </span><span style="color:#bfbab0cc;">-&gt; </span><span style="color:#ff7733;">f64 </span><span>{
</span><span>        </span><span style="color:#ff7733;">let</span><span> total_coupons </span><span style="color:#f29668;">=</span><span> days </span><span style="color:#f29668;">as </span><span style="color:#ff7733;">usize</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="color:#ff7733;">let mut</span><span> expected_value </span><span style="color:#f29668;">= </span><span style="color:#f29718;">0.0</span><span style="color:#bfbab0cc;">;
</span><span>
</span><span>        </span><span style="color:#ff7733;">let mut</span><span> memo </span><span style="color:#f29668;">= </span><span>HashMap</span><span style="color:#f29668;">::</span><span>new()</span><span style="color:#bfbab0cc;">;
</span><span>
</span><span>        </span><span style="color:#ff7733;">for</span><span> curr_coupons </span><span style="color:#f29668;">in </span><span style="color:#f29718;">0</span><span style="color:#f29668;">..</span><span>total_coupons {
</span><span>            </span><span style="color:#ff7733;">let</span><span> sign </span><span style="color:#f29668;">= </span><span style="color:#ff7733;">if </span><span>(total_coupons </span><span style="color:#f29668;">- </span><span style="color:#f29718;">1 </span><span style="color:#f29668;">-</span><span> curr_coupons) </span><span style="color:#f29668;">% </span><span style="color:#f29718;">2 </span><span style="color:#f29668;">== </span><span style="color:#f29718;">0 </span><span>{
</span><span>                </span><span style="color:#f29718;">1.0
</span><span>            } </span><span style="color:#ff7733;">else </span><span>{
</span><span>                </span><span style="color:#f29668;">-</span><span style="color:#f29718;">1.0
</span><span>            }</span><span style="color:#bfbab0cc;">;
</span><span>
</span><span>            </span><span style="font-style:italic;color:#5c6773;">// we will memorize the product of the probabilities of the subsets
</span><span>            </span><span style="color:#ff7733;">let</span><span> subset_sum </span><span style="color:#f29668;">= </span><span style="color:#ff7733;">match</span><span> curr_coupons {
</span><span>                </span><span style="color:#f29718;">0 </span><span style="color:#f29668;">=&gt; </span><span>{
</span><span>                    </span><span style="font-style:italic;color:#5c6773;">// the probability of getting any coupon in the empty set
</span><span>                    </span><span style="font-style:italic;color:#5c6773;">// is zero, so (1 - 0) = 1 and 1/1 = 1:
</span><span>                    </span><span style="color:#f29718;">1</span><span style="color:#ff7733;">f64
</span><span>                }
</span><span>                </span><span style="color:#f29718;">1 </span><span style="color:#f29668;">=&gt; </span><span>{
</span><span>                    </span><span style="color:#ff7733;">let mut</span><span> inner_sum </span><span style="color:#f29668;">= </span><span style="color:#f29718;">0.0</span><span style="color:#bfbab0cc;">;
</span><span>                    probabilities</span><span style="color:#f29668;">.</span><span style="color:#f07178;">keys</span><span>()</span><span style="color:#f29668;">.</span><span style="color:#f07178;">for_each</span><span>(|</span><span style="color:#f29668;">&amp;</span><span style="color:#f29718;">key</span><span>| {
</span><span>                        </span><span style="color:#ff7733;">let</span><span> val </span><span style="color:#f29668;">= </span><span style="color:#f29718;">1.0 </span><span style="color:#f29668;">-</span><span> probabilities[</span><span style="color:#f29668;">&amp;</span><span>key]</span><span style="color:#bfbab0cc;">;
</span><span>                        inner_sum </span><span style="color:#f29668;">+= </span><span style="color:#f29718;">1.0 </span><span style="color:#f29668;">/</span><span> val</span><span style="color:#bfbab0cc;">;
</span><span>                        memo</span><span style="color:#f29668;">.</span><span style="color:#f07178;">insert</span><span>(</span><span style="color:#f07178;">vec!</span><span>[key]</span><span style="color:#bfbab0cc;">,</span><span> val)</span><span style="color:#bfbab0cc;">;
</span><span>                    })</span><span style="color:#bfbab0cc;">;
</span><span>
</span><span>                    inner_sum
</span><span>                }
</span><span>                </span><span style="color:#f29668;">_ =&gt; </span><span>{
</span><span>                    </span><span style="color:#ff7733;">let mut</span><span> inner_sum </span><span style="color:#f29668;">= </span><span style="color:#f29718;">0.0</span><span style="color:#bfbab0cc;">;
</span><span>                    </span><span style="color:#ff7733;">for</span><span> subset </span><span style="color:#f29668;">in</span><span> probabilities</span><span style="color:#f29668;">.</span><span style="color:#f07178;">keys</span><span>()</span><span style="color:#f29668;">.</span><span style="color:#f07178;">combinations</span><span>(curr_coupons) {
</span><span>                        </span><span style="color:#ff7733;">let</span><span> subset </span><span style="color:#f29668;">=</span><span> subset</span><span style="color:#f29668;">.</span><span style="color:#f07178;">into_iter</span><span>()</span><span style="color:#f29668;">.</span><span style="color:#f07178;">copied</span><span>()</span><span style="color:#f29668;">.</span><span>collect</span><span style="color:#f29668;">::</span><span>&lt;</span><span style="font-style:italic;color:#39bae6;">Vec</span><span>&lt;</span><span style="color:#f29668;">_</span><span>&gt;&gt;()</span><span style="color:#bfbab0cc;">;
</span><span>                        </span><span style="color:#ff7733;">let</span><span> rest </span><span style="color:#f29668;">= &amp;</span><span>subset[</span><span style="color:#f29668;">..</span><span>curr_coupons </span><span style="color:#f29668;">- </span><span style="color:#f29718;">1</span><span>]</span><span style="color:#bfbab0cc;">;
</span><span>                        </span><span style="color:#ff7733;">let</span><span> new </span><span style="color:#f29668;">= </span><span>[subset[curr_coupons </span><span style="color:#f29668;">- </span><span style="color:#f29718;">1</span><span>]]</span><span style="color:#bfbab0cc;">;
</span><span>                        </span><span style="color:#ff7733;">let</span><span> product </span><span style="color:#f29668;">=</span><span> memo[rest] </span><span style="color:#f29668;">*</span><span> memo[new</span><span style="color:#f29668;">.</span><span style="color:#f07178;">as_slice</span><span>()]</span><span style="color:#bfbab0cc;">;
</span><span>
</span><span>                        </span><span style="color:#ff7733;">let</span><span> val </span><span style="color:#f29668;">= </span><span style="color:#f29718;">1.0 </span><span style="color:#f29668;">/ </span><span>(</span><span style="color:#f29718;">1.0 </span><span style="color:#f29668;">-</span><span> product)</span><span style="color:#bfbab0cc;">;
</span><span>                        inner_sum </span><span style="color:#f29668;">+=</span><span> val</span><span style="color:#bfbab0cc;">;
</span><span>
</span><span>                        memo</span><span style="color:#f29668;">.</span><span style="color:#f07178;">insert</span><span>(subset</span><span style="color:#bfbab0cc;">,</span><span> product)</span><span style="color:#bfbab0cc;">;
</span><span>                    }
</span><span>                    inner_sum
</span><span>                }
</span><span>            }</span><span style="color:#bfbab0cc;">;
</span><span>
</span><span>            expected_value </span><span style="color:#f29668;">+=</span><span> sign </span><span style="color:#f29668;">*</span><span> subset_sum</span><span style="color:#bfbab0cc;">;
</span><span>        }
</span><span>
</span><span>        expected_value
</span><span>    }
</span><span>}
</span></code></pre>





<label class="spoiler-container">
    <input type="checkbox" id="spoiler-34303" class="spoiler-toggle" role="button" aria-pressed="false" />
    <span class="spoiler-content" title="reveal spoiler" tabindex="0">
        <span class="spoiler-hidden">text to hide</p>
</span>
    </span>
</label>
<pre data-lang="markdown" style="background-color:#0f1419;color:#bfbab0;" class="language-markdown "><code class="language-markdown" data-lang="markdown"><span>{%- mermaid() -%}
</span><span>graph LR
</span><span>    A[Start] --&gt; B[Initialize]
</span><span>    B --&gt; C[Processing]
</span><span>    C --&gt; D[Complete]
</span><span>    D --&gt; E[Success]
</span><span>    
</span><span style="background-color:#bfbab007;color:#bfbab0;">    style A fill:#f9f,stroke:#333
</span><span style="background-color:#bfbab007;color:#bfbab0;">    style E fill:#9f9,stroke:#333
</span><span>{%- end -%}
</span><span>
</span><span>```</span><span style="color:#f29718;">rust
</span><span style="background-color:#bfbab007;color:#bfbab0;">{{</span><span style="background-color:#bfbab007;font-style:italic;color:#5c6773;">/* remote_text(src=&quot;https://raw.githubusercontent.com/SeniorMars/seniormars.com/refs/heads/main/content/posts/everyday_birthday/src/flajolet.rs&quot;) *\}}
</span><span>```
</span><span>
</span><span>{{/* spoiler(text=&quot;text to hide&quot;, fixed_blur=false) </span><span style="color:#95e6cb;">\*</span><span>}}
</span></code></pre>
<hr><ol class="footnotes-list">
<li id="fn-1">
<p>hello <a href="#fr-1-1">↩</a></p>
</li>
</ol>

        </section>
    </article>
</main>



        
            
        

        
    </div>
</body>

</html>
